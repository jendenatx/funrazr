<!doctype html>
<html>
<style type="text/css">
	body{
}
h1{
  font-family: Cafeteria,sans-serif;
  font-size: 5em;
  font-weight: 600;
	line-height: 50px;
	margin: 0;
	padding: 0;
	text-align: center;
	display: inline;
  padding: 0px;
  color:#662D91;
  }
p{
  font-family: Cafeteria,sans-serif;
  font-size: 3em;
  font-weight: 600;
	line-height: 48px;
	margin: 0;
	padding: 0;
	text-align: center;
	display: inline;
  padding: 0px; 
  color: #00A99D
}
.progress-bg {
	margin: 0 auto;
	width: 65%;
	height: 78px;
	border-radius: 10px;
  text-align: center;
	-moz-box-shadow:    inset 0 0 10px #ccc;
	-webkit-box-shadow: inset 0 0 10px #ccc;
	box-shadow:         inset 0 0 10px #ccc;
  background-color: #fff	
}
.progress-bar {
	height: 78px;
	border-radius: 10px;
	float: left;
	width: 50%;
	/* fallback */ 
	background-color:#5f4b8b	;	
}
.progress-bg h3.goal, .progress-bg h3.raised {
	font-family: Cafeteria,sans-serif;
  font-size: 3em;
  font-weight: 600;
	line-height: 78px;
	margin: 0;
	padding: 0;
	text-align: center;
	display: inline;
}
.progress-bg h3.raised {
	color: #fff;
	margin: 14px 25px 0 50px;
	padding: 0 25px 0 0;
}
.progress-bg h3.goal {
	color: #00A99D;
  text-align: center;
}
body .progress-bg h3.raised {
    -webkit-animation: fadein 4s; /* Safari and Chrome */
       -moz-animation: fadein 4s; /* Firefox */
        -ms-animation: fadein 4s; /* Internet Explorer */
         -o-animation: fadein 4s; /* Opera */
            animation: fadein 4s;
}
@keyframes fadein {
    from { opacity: 0; }
    to   { opacity: 1; }
}
/* Firefox */
@-moz-keyframes fadein {
    from { opacity: 0; }
    to   { opacity: 1; }
}
/* Safari and Chrome */
@-webkit-keyframes fadein {
    from { opacity: 0; }
    to   { opacity: 1; }
}
/* Internet Explorer */
@-ms-keyframes fadein {
    from { opacity: 0; }
    to   { opacity: 1; }
}
/* Opera */
@-o-keyframes fadein {
    from { opacity: 0; }
    to   { opacity: 1; }
}
.progress-bg h3.goal {
	float: right;
	display: inline;
	padding: 0 25px 0 0;
  text-align: center;
}
body .progress-bg div {
	-webkit-animation: progress-bar 2s ease forwards;
	-moz-animation: progress-bar 2s ease forwards;
	-o-animation: progress-bar 2s ease forwards;
	animation: progress-bar 2s ease forwards;
}
@-webkit-keyframes progress-bar {
    from { width: 0%; }
    to { width: 50%; }
}
@-moz-keyframes progress-bar {
    from { width: 0%; }
    to { width: 50%; }
}

@-o-keyframes progress-bar {
    from { width: 0%; }
    to { width: 50%; }
}
@keyframes progress-bar {
    from { width: 0%; }
    to { width: 50%; }
}
</style>
<!doctype html>
<center>
    <h1>Healing with House 
	    <br>Raid Train Fundraiser</br>
	</h1>
    <p>Benefitting House Music Pioneer Jesse Saunders in his stroke recovery</p>
</center>
<div class="progress-bg">
    	<div class="progress-bar">
        	<h3 class="raised">$20&nbsp;raised </h3>
        </div>
        	
        	<h3 class="goal">Goal: $5,000</h3>
    </div>
<script>
		// Replace the spreadsheetId and range with your own values
		const spreadsheetId = '1_r9zPr2ChlW70VJfI5GsiCTqeJtxB-jALr6rZbl21Ng';
		const range = 'B4';

		// Replace the apiKey with your own API key
		const apiKey = 'AIzaSyBpqFwb8Lj5WTJE0ldazYBKs5u_BC6BB7k';

		// Construct the URL to retrieve the spreadsheet data
		const url = `https://sheets.googleapis.com/v4/spreadsheets/${spreadsheetId}/values/${range}?key=${apiKey}`;

		// Update the progress bar every 15 minutes
		setInterval(updateProgressBar, 900000); 

		function updateProgressBar() {
			// Fetch the spreadsheet data
			fetch(url)
			  .then(response => response.json())
			  .then(data => {
			    const rows = data.values;
			    // Extract the amount raised and goal from the fetched data
			    const amountRaised = parseInt(rows[0][0].replace(/[^0-9]/g, ''));
			    const goal = parseInt(rows[1][0].replace(/[^0-9]/g, ''));
			    const percentage = Math.round(amountRaised / goal * 100);
			    document.getElementById("bar").innerHTML = percentage + "%";
			    document.getElementById("bar").style.width = percentage + "%";
			  })
			  .catch(error => {
			    console.error('Error:', error);
			  });
		}
	</script>
</html>
